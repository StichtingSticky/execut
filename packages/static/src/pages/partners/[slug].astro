---
import { getCollection } from 'astro:content'
import { Image } from 'astro:assets'

import { Icon } from 'astro-icon/components'

import Layout from '~/layouts/section.astro'

import Section from '~/components/section.astro'

export const getStaticPaths = async () => {
  const enties = await getCollection('partners')

  return enties.map((entry) => {
    const { slug } = entry

    return {
      params: { slug },
      props: { entry },
    }
  })
}

const { entry } = Astro.props

const { data, render } = entry

const { name, industry, logo, contact } = data

const { website, socials } = contact

const { Content } = await render()
---

<Layout title={name}>
  <Section>
    <div class="flex flex-col items-center">
      <Image class="m-auto h-32" src={logo} alt={name} />

      <div class="mt-4 flex sm:mt-8">
        {
          socials.map((social) => {
            const [[name, href]] = Object.entries(social)

            return (
              <a
                class="transition hover:bg-brown/40 hover:shadow-sm focus:outline-hidden focus:ring-3 focus:ring-brown/40"
                {href}>
                <Icon name={`mdi:${name}`} class="h-10 w-10 fill-brown p-2" />
              </a>
            )
          })
        }
      </div>

      <a
        class="mt-2 text-center text-green underline transition-colors hover:text-green/80"
        href={website}>
        Learn more about {name}
      </a>
    </div>

    <h2 class="mt-3 font-mono text-2xl font-bold text-red sm:mt-12 md:mt-0">
      About {name}
    </h2>
    <p class="text-md text-brown/60">{industry}</p>

    <div class="prose my-4 max-w-none text-justify sm:mt-6">
      <Content />
    </div>
  </Section>
</Layout>
